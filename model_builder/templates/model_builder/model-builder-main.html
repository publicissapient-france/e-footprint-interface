<div id="model-builder-page">
    <div class="grid grid-cols-2 gap-4 items-center">
        {% include "./graph-container.html" with systemFootprint=systemFootprint %}
        {% include "./compare-container.html" with img_base64=img_base64 %}
    </div>
    <div class="flex justify-between px-8 items-center">
        <div class="flex gap-8">
            <button class="flex items-center gap-1 py-2 px-6 text-primary border-primary border-2 border-solid rounded-xl hover:text-black hover:border-black"
                    hx-post="set-reference-model" hx-target="#model-builder-page" hx-swap="innerHTML">
                {% if is_reference_model_set %} Model set as a reference <img src="/static/icons/check-green.svg" alt="Check"/>{% else %} Set model as a reference {% endif %}
            </button>
            {% if is_ref_model_edited %}
            <button class="py-2 px-6 bg-primary text-white rounded-xl hover:text-primary hover:bg-white hover:border-primary hover:border-2 hover:border-solid"
                    hx-post="compare_with_reference" hx-target="#model-builder-page" hx-swap="innerHTML">
                Compare the two models
            </button>
            <button class="py-2 px-6 bg-primary text-white rounded-xl hover:text-primary hover:bg-white hover:border-primary hover:border-2 hover:border-solid"
                    hx-post="reset_model_reference" hx-target="#model-builder-page" hx-swap="innerHTML">
                Reset to the model reference
            </button>
            {% endif %}
        </div>
        <a class="edit-object-button bg-primary py-2 px-6 rounded-xl h-min hover:bg-black text-white" href="download-json">Export your model</a>
    </div>
    <div class="flex flex-row">
        <div id="objects-list"
             class="flex flex-col flex-1 p-8 rounded text-black-1 gap-y-1">
            {% for object_type, object_list in context.items %}
                <div class="bg-grey-16 p-4 rounded">
                    <div class="flex items-center gap-x-2 mb-2 font-bold p-4 h-fit">
                        <div class="border-primary border-2 bg-white-1 rounded-full p-2 h-fit">
                            <img class="w-10 h-10" src="/static/icons/object-icons/{{ object_type }}.svg" alt="{{ object_type }}-icon"/>
                        </div>
                        <h3 class="mb-2 font-bold">{{ object_type }}</h3>
                    </div>
                    <section id="{{ object_type }}-section" class="flex flex-row rounded gap-x-4">
                        <div class="flex border-dotted border-primary-light border-2 p-4 w-48 h-48 rounded">
                            <button class="text-black flex flex-col my-auto mx-auto items-center"
                                    id="add-new-{{ object_type }}-button"
                                    script="on click if #object-creation-or-edition-form is not null then remove #object-creation-or-edition-form"
                                    hx-post="open-create-object-panel/{{ object_type }}/"
                                    hx-swap="beforeend"
                                    hx-target="#model-builder-page">
                                <span class="flex place-content-center h-16 w-16 text-white bg-primary-lighter rounded-full"><span class="my-auto">
                                    <img src="/static/icons/plus-white.svg" alt="Add new object" />
                                    </span></span><span>Add {{ object_type }}</span>
                        </button>
                    </div>
                    {% for object in object_list %}
                    {% include "./e-footprint-object.html" with object=object object_type=object_type %}
                    {% endfor %}
                </section>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
